<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/modal.css">
    <script src="js/modal.js"></script>
    <!-- <script src="../ui.bundle.js"></script> -->
    <style>
        .box {
            width: 500px;
            height: 400px;
            /* border: 1px solid #c00; */
            display: none;
            background: #fff;
            margin: 0 auto;

        }

        .box2 {
            border: 1px solid #c00;
        }
    </style>
</head>

<body>
    <div class="mm"></div>
    <div class="box box1">
        <button class="btn-close1">close</button>
    </div>
    <div class="box box2">
        <button class="btn-close2">close</button>
    </div>
    <div class="box box3">width header box3</div>
    <div class="box box4">with footer box4</div>
    <button class="btn-open">open</button>
    <button class="btn-autoFade">autoFade</button>
    <button class="btn-nomask">nomask</button>
    <button class="btn-withHeader">width header</button>
    <button class="btn-withFooter">width Footer</button>

    <button class="btn-confirm">confirm</button>
    <button class="btn-info">info</button>
    <button class="btn-warning">warning</button>
    <button class="btn-error">error</button>
    <button class="btn-success">success</button>
    <button class="btn-success2">success2</button>

    <!-- confirm结构 -->
    <!-- <div class="xui-modal-container" >
        <div class="xui-modal-mask" style="display: block;"></div>
        <div class="xui-modal-box" style="display: block;">
            <div class="xui-modal-wrap" >
                <div class="xui-modal-content xui-modal-confirm" style="width:416px;">
                    <div class="xui-modal-body">
                         <div class="xui-modal-body-title">
                            <span class="xui-modal-title-icon">
                                <svg viewBox="64 64 896 896" focusable="false" class="" data-icon="exclamation-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"></path></svg>
                            </span>
                            <span class="xui-modal-body-title-context"> this is a title</span>
                         </div>
                         <div class="xui-modal-body-content">
                             <div>hellodddddddddddddddddddddddddddddddddddddddddddddddddd</div>
                             <div>world</div>
                         </div>
                         <div class="xui-modal-footer">
                            <button class="xui-modal-footer-button btn-cancel">取消</button>
                            <button class="xui-modal-footer-button btn-confirm">
                                <span class="xui-modal-loading-icon-box">
                                    <span class="xui-modal-loading-icon"><svg viewBox="0 0 1024 1024" focusable="false" class="xui-modal-loading-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg></span>
                                </span>
                                <span>确认</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> -->

    <!-- 拖拽栗子 -->
    <!-- <div class="xui-modal-container ui-modal-show">
        <div class="xui-modal-mask"></div>
        <div class="xui-modal-box">
            <div class="xui-modal-wrap">
                <div class="xui-modal-content" style="width:auto;">

                    <div class="xui-modal-header xui-modal-drag">
                        <div class="xui-modal-title">
                            <div>Modal Title</div>
                        </div>
                        <button class="xui-modal-close">
                            <svg viewBox="64 64 896 896" focusable="false" class="" data-icon="close" width="1em"
                                height="1em" fill="currentColor" aria-hidden="true">
                                <path
                                    d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z">
                                </path>
                            </svg>
                        </button>
                    </div>
                    <div class="xui-modal-body">
                        <div class="box box3" style="display: block;">width header box3</div>
                    </div>

                    <div class="xui-modal-footer">
                        <button class="xui-modal-footer-button modal-btn0">btn1</button><button
                            class="xui-modal-footer-button modal-btn1">btn2</button><button
                            class="xui-modal-footer-button modal-btn2">btn3</button>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <script>
        document.querySelector('.xui-modal-drag').onmousedown = function(ev){
            let startX = ev.pageX,
                startY = ev.pageY,
                content =  document.querySelector('.xui-modal-content'),
                //获取上一次的tranform中的值
                transform = getComputedStyle(content).transform.substring(7).split(','),
                prevX = transform[4] ? parseFloat(transform[4]) : 0,
                prevY = transform[5] ? parseFloat(transform[5]) : 0;
                //添加处于拖拽过程中的类
                content.classList.add('xui-modal-dragging');
            document.onmousemove = function(ev){
                let disX = ev.pageX - startX;
                let disY = ev.pageY - startY;
                document.querySelector('.xui-modal-content').style.transform = `translate(${prevX+disX}px,${prevY+disY}px)`;
            }
            document.onmouseup = function(){
                document.onmousemove = null;
                document.onmouseup = null;
                //移除处于拖拽过程中的类
                content.classList.remove('xui-modal-dragging');
                return false;
            }
        }
    </script> -->

    <script>
        //普通元素,仅弹出目标物,可以给一个className，以便可以更改某些样式（增加权重）
        let modal0 = modal.render({
            content: '.box1',
            className: 'demo0',
            style: {
                left: 10
            }
        });

        //写入string 格式，并自动隐藏,当content为string时，不能从按钮处弹出到目标位置
        let modal2 = modal.render({
            content: 'auto fade',
            autoFade: 1000
        });

        //不带mask层
        let modal3 = modal.render({
            content: document.querySelector('.box2'),
            className:'box222',
            style: {
                top: 0
            },
            mask: false
        });
        //带有header，可以设置是否拖拽，后面的静态方法中没有header不能拖拽
        let modal4 = modal.render({
            content: document.querySelector('.box3'),
            header: {
                title: 'Modal Title',
                draggable: true
            },
            footer: ['btn1', 'btn2', 'btn3']
        });
        //给每隔按钮添加事件
        modal4.click(function (ev) {
            console.log(ev.target);
        })
        //带有footer，如果传入一个数组，按钮值是数组中的值，如果传入字符串则是渲染字符串，
        //如果传入一个对象则根据对象来配置，并切实是默认按钮（一个取消，一个确定）
        //width给modal一个宽度，不写以内容来撑开
        let modal5 = modal.render({
            content: document.querySelector('.box4'),
            width: 600,
            // footer:'<button>123</button><button>156156</button>'
            // footer:['btn1','btn2','btn3']
            footer: {
                loading: true,
                cancelText: '重置',
                onCancel: function (hide) {
                    hide();
                },
                onOk: function (hide) {
                    if (true) {
                        console.log(this);
                        //取消loading状态
                        this.cancelLoading();
                        return;
                    }
                    setTimeout(() => {
                        hide();
                    }, 3000)
                },
                okText: '提交',
            },
        });

        let modal6 = modal.render({
            content: 'now this is a message for you',
        });
        //点击modal添加的事件
        modal0.click(function (ev) {
            console.log(ev.target);
        })
        //显示modal
        document.querySelector('.btn-open').onclick = function () {
            modal0.show();
        }
        //隐藏modal
        document.querySelector('.btn-close1').onclick = function () {
            modal0.hide();
        }
        //隐藏modal
        document.querySelector('.btn-close2').onclick = function () {
            modal3.hide();
        }
        //显示自动隐藏的modal
        document.querySelector('.btn-autoFade').onclick = function () {
            modal2.show();
        }
        //不显示mask
        document.querySelector('.btn-nomask').onclick = function () {
            modal3.show();
        }
        //带有header的modal
        document.querySelector('.btn-withHeader').onclick = function () {
            modal4.show();
        }
        //带有footer的modal
        document.querySelector('.btn-withFooter').onclick = function () {
            modal5.show();
        }
        /***
         *1.带有footer的modal,一般参数和普通modal一致
         *2.loading 表示是否是异步处理，点击确认后出现loading状态
         *3.onOk表示点击确认后的回调函数，参数也是一个回调函数，当调用这个参数中的回调函数时，会关闭确认框，
         *4.一般用于异步结束关闭确认框，如果没有onOk参数，那么同onCancel一致，直接关闭确认框
         *5.width可以设置宽度，不写该属性默认为416px,
         *6.style是一个对象，里面可以设置modal显示的位置，top默认100px，left默认居中显示，如果需要top也居中可传入:{top:'center'}，也可以只设置其中一个值如:{left:200}
         ***/
        document.querySelector('.btn-confirm').onclick = function () {
            Modal.confirm({
                title: 'this is a confirm',
                content: 'now msg mmmmm meg msg',
                width: 416,
                style: {
                    top: 'center'
                },
                layerClose: true,
                loading: true,
                onCancel: function () {
                    console.log(666);
                },
                onOk: function (hide) {
                    setTimeout(function () {
                        hide();
                    }, 1000)
                }
            });
        }
        //info
        document.querySelector('.btn-info').onclick = function () {
            Modal.info({
                title: 'this is a info',
                content: 'now msg mmmmm meg msg',
                layerClose: true,
                loading: true,
                onOk: function (hide) {
                    setTimeout(function () {
                        hide();
                    }, 1000)
                }
            });
        }
        //warning
        document.querySelector('.btn-warning').onclick = function () {
            Modal.warning({
                title: 'this is a warning',
                content: 'now msg mmmmm meg msg',
                layerClose: true,
                loading: true,
                noFooter: true,
                onOk: function (hide) {
                    setTimeout(function () {
                        hide();
                    }, 1000)
                }
            });
        }
        //error
        document.querySelector('.btn-error').onclick = function () {
            Modal.error({
                title: 'this is a error',
                content: '',
                layerClose: true,
                loading: true,
                onOk: function (hide) {
                    setTimeout(function () {
                        hide();
                    }, 1000)
                }
            });
        }
        //success
        document.querySelector('.btn-success').onclick = function () {
            Modal.success({
                title: 'this is a success',
                content: '',
                layerClose: true,
                loading: true,
                autoFade: 3000,
                onOk: function (hide) {
                    setTimeout(function () {
                        hide();
                    }, 1000)
                }
            });
        }
        //success,没有按钮的，上面 其他的都可以,还可以设置宽度
        document.querySelector('.btn-success2').onclick = function () {
            Modal.success({
                title: 'this is a success2',
                width: 1000,
                autoFade: 3000,
                noFooter: true,
            });
        }
    </script>
</body>

</html>